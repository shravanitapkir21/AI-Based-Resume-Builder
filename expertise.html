<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CareerCraft | Projects</title>
  <link rel="stylesheet" href="personal_info.css">
  <style>
    /* page-specific */
    .skill-chip { display:inline-block; padding:8px 14px; background:#e7f1ff; color:#0056b3; border-radius:18px; margin:6px; cursor:pointer; font-weight:600; }
    .skill-chip.selected { background:#0056b3; color:#fff; }
    .step-controls { display:flex; gap:12px; justify-content:center; margin-top:18px; }
    .step { display:none; }
    .step.active { display:block; }
    .btn-secondary { background:transparent; border:1px solid #d7e7ff; padding:10px 18px; border-radius:12px; cursor:pointer; }
    .section-split { display:grid; grid-template-columns: 1fr; gap:18px; }
    .projects-list .project-box { padding:15px; margin:10px 0; background:#eef6ff; border-radius:12px; }
    .projects-container {
      max-width: 750px;
      margin: auto;
      background: #ffffff50;
      padding: 20px;
      border-radius: 14px;
      border: 2px solid #053b72;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .projects-container:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 36px rgba(0, 123, 255, 0.15);
    }
    
    footer {
  background: #062845;
  color: white;
  padding: 60px 10% 30px;
}
.footer-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-bottom: 30px;
}
.footer-container div {
  width: 250px;
}
footer h4 {
  margin-bottom: 10px;
}
footer a {
  text-decoration: none;
  color: white;
  font-size: 14px;
}
footer a:hover {
  text-decoration: underline;
}
.copy {
  text-align: center;
  border-top: 1px solid rgba(255,255,255,0.2);
  padding-top: 15px;
  font-size: 14px;
}
    .small-muted { color:#64748b; padding:8px 0; }
    .helper { transition:opacity .2s; opacity:0; color:#0056b3; }

  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
  <img src="images/logo.png" alt="CareerCraft Logo">
  <span>CareerCraft</span>
</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="personal_info.html">Personal Info</a>
      <a href="education.html">Education</a>
      <a href="experience.html">Experience</a>
      <a href="expertise.html" class="active">Expertise & Projects</a>
      <a href="skills_debug.html" class="btn-next-top">Next</a>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner reveal">
      <div class="hero-left">
       <h1>Projects</h1>
       <p>Add your projects — save, edit and reuse them for your resume.</p>
       <a href="#projectForm" class="cta">Add Your Project</a>
      </div>

      <div class="hero-right">
        <img src="images/project.png" alt="Illustration">
      </div>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="form-section" style="padding-bottom:60px;">
        
    <div class="projects-container">
      <h2 style="margin-bottom:6px;">Projects</h2>
      <p class="small-muted">Add your academic or personal projects to strengthen your resume.</p>

      <form id="projectForm" onsubmit="return false;" style="margin-top:12px;">
        <div style="margin-bottom:10px;">
          <label>Project Title</label>
          <input id="title" type="text" placeholder="e.g. Academic Mini Project" style="width:100%;padding:10px;margin-top:6px;">
        </div>
        <div style="margin-bottom:10px;">
          <label>Description</label>
          <textarea
            id="desc"
            maxlength="300"
            placeholder="Provide a brief summary of the project"
            style="width:100%;padding:10px;margin-top:6px;"
          ></textarea>

        <small class="small-muted">
           Tip: Mention problem, solution, tools used & result.
        </small>

        <small id="descCount" class="small-muted" style="float:right;">
           0 / 300 characters
        </small>


        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
          <div>
            <label>Technologies Used</label>
            <input id="tech" type="text" placeholder="e.g. Programming languages and tools" style="width:100%;padding:10px;margin-top:6px;">
          </div>
          <div>
            <label>Your Role</label>
            <input id="role" type="text" placeholder="e.g. Project Contributor" style="width:100%;padding:10px;margin-top:6px;">
          </div>
        </div>

        <div class="actions" style="margin-top:12px;">
          <button type="button" class="save-btn" id="addProjectBtn">Add Project</button>
        </div>

        <p class="helper" id="projectMsg">Project Added!</p>
      </form>

      <hr style="margin:20px 0;">

      <h3>Your Projects</h3>
      <div id="projectList" class="projects-list"></div>
    </div>

  </main> <!-- MAIN CLOSED properly -->

 

  <script>
    const draftKey = "draftProject";
    
    document.addEventListener('DOMContentLoaded', () => {
      // reveal
      document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));

      /* ---------------------------
         Projects logic
         --------------------------- */

      const list = document.getElementById('projectList');
      let projects = JSON.parse(localStorage.getItem('projectsInfo')) || [];

      function persistProjects() {
        localStorage.setItem('projectsInfo', JSON.stringify(projects));
      }

      function escapeHtml(str) {
        if (!str) return '';
        return str.replaceAll('&', '&amp;').replaceAll('<', '&lt;').replaceAll('>', '&gt;').replaceAll('"', '&quot;');
      }
      
      function timeAgo(iso) {
      const now = new Date();
      const updated = new Date(iso);
      const diffMs = now - updated;

      const seconds = Math.floor(diffMs / 1000);
      const minutes = Math.floor(seconds / 60);
      const hours   = Math.floor(minutes / 60);
      const days    = Math.floor(hours / 24);

      if (seconds < 60) return "Updated just now";
      if (minutes < 60) return `Updated ${minutes} min ago`;
      if (hours < 24)   return `Updated ${hours} hours ago`;
      if (days < 30)    return `Updated ${days} days ago`;

      return `Updated ${updated.toLocaleDateString('en-US', {
      month: 'short',
      year: 'numeric'
      })}`;
   }

      function renderProjects() {
        list.innerHTML = '';

        if (projects.length === 0) {
  list.innerHTML = `
    <div style="
      background:#f8fbff;
      border:1px dashed #9ec5ff;
      padding:24px;
      border-radius:14px;
      text-align:center;
    ">
      <img 
        src="images/empty-projects.png" 
        alt="No projects"
        style="width:140px; margin-bottom:14px;"
      />

      <p style="font-size:15px; color:#334155; margin-bottom:6px;">
        Projects will appear here as you add them.
      </p>

      <p class="small-muted" style="font-size:14px;">
        This section updates automatically and is saved securely.
      </p>
    </div>
  `;
  return;
}


        projects.forEach((p, idx) => {
          const box = document.createElement('div');
          box.className = 'project-box';
          box.innerHTML = `
            <h4>${escapeHtml(p.title)}</h4>
            <p>${escapeHtml(p.desc)}</p>
            <p><b>Tech:</b> ${escapeHtml(p.tech)}</p>
            <p><b>Role:</b> ${escapeHtml(p.role)}</p>
             <div class="project-role">
               ${timeAgo(p.updatedAt)}
             </div>
             <div style="margin-top:8px;">
              <button data-idx="${idx}" class="btn-secondary edit-btn">Edit</button>
              <button data-idx="${idx}" class="save-btn remove-btn" style="margin-left:8px">Remove</button>
            </div>
          `;
          list.appendChild(box);
        });
      
        document.querySelectorAll('.remove-btn').forEach(btn => {
          btn.onclick = (e) => {
          const i = Number(e.currentTarget.dataset.idx);

          const confirmDelete = confirm(
          "Are you sure you want to delete this project?\nThis action cannot be undone."
       );

         if (!confirmDelete) return;

         projects.splice(i, 1);
         persistProjects();
         renderProjects();
        };
       });

        document.querySelectorAll('.edit-btn').forEach(btn => {
          btn.onclick = (e) => {
            const i = Number(e.currentTarget.dataset.idx);
            const p = projects[i];
            document.getElementById('title').value = p.title;
            document.getElementById('desc').value = p.desc;
            document.getElementById('tech').value = p.tech;
            document.getElementById('role').value = p.role;
            projects.splice(i, 1);
            persistProjects();
            renderProjects();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          };
        });
      }

      renderProjects();

       /* ===============================
         RESTORE DRAFT ON LOAD
         =============================== */

      const savedDraft = JSON.parse(localStorage.getItem(draftKey));

      if (savedDraft) {
        document.getElementById('title').value = savedDraft.title || '';
        document.getElementById('desc').value  = savedDraft.desc || '';
        document.getElementById('tech').value  = savedDraft.tech || '';
        document.getElementById('role').value  = savedDraft.role || '';
      }

      /* ===============================
         END RESTORE DRAFT
         =============================== */
      const titleInput = document.getElementById('title');
      const addBtn = document.getElementById('addProjectBtn');

      function toggleAddBtn() {
       addBtn.disabled = !titleInput.value.trim();
      addBtn.style.opacity = addBtn.disabled ? '0.6' : '1';
    }

titleInput.addEventListener('input', toggleAddBtn);
toggleAddBtn();
   
  const descInput = document.getElementById('desc');
  const descCount = document.getElementById('descCount');

  function updateDescCounter() {
    const len = descInput.value.length;
    descCount.textContent = `${len} / 300 characters`;

    if (len >= 280) {
      descCount.style.color = 'red';
    } else {
      descCount.style.color = '#64748b';
    }
  }


/* ===============================
   AUTO-SAVE DRAFT (START)
   =============================== */

const titleEl = document.getElementById('title');
const descEl  = document.getElementById('desc');
const techEl  = document.getElementById('tech');
const roleEl  = document.getElementById('role');

function saveDraft() {
  const draft = {
    title: titleEl.value,
    desc: descEl.value,
    tech: techEl.value,
    role: roleEl.value
  };
  localStorage.setItem(draftKey, JSON.stringify(draft));
}

[titleEl, descEl, techEl, roleEl].forEach(input => {
  input.addEventListener('input', saveDraft);
});

/* ===============================
   AUTO-SAVE DRAFT (END)
   =============================== */

  descInput.addEventListener('input', updateDescCounter);
  updateDescCounter();

      document.getElementById('addProjectBtn').onclick = () => {
        const title = document.getElementById('title').value.trim();
        if (!title) { alert('Please enter a project title.'); return; }

        const project = {
          title,
           desc: document.getElementById('desc').value.replace(/\s+/g, ' ').trim(),
           tech: document.getElementById('tech').value.replace(/\s+/g, ' ').trim(),
           role: document.getElementById('role').value.replace(/\s+/g, ' ').trim(),
           updatedAt: new Date().toISOString()
        };

        projects.unshift(project);
        persistProjects();
        document.getElementById('projectMsg').style.opacity = '1';
        setTimeout(() => document.getElementById('projectMsg').style.opacity = '0', 1600);
        renderProjects();

        document.getElementById('title').value = '';
        document.getElementById('desc').value = '';
        document.getElementById('tech').value = '';
        document.getElementById('role').value = '';

         // ✅ Clear draft after successful add
        localStorage.removeItem(draftKey);
      };
    });

  </script>

  <!-- Footer -->
  <footer aria-label="Footer">
    <div class="footer-container">
      <div>
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
          <img src="images/logo.png" alt="CareerCraft Logo" style="width: 40px; height: auto;">
          <h4 style="font-size: 24px;">CareerCraft</h4>
        </div>
        <p style="font-size: 16px;">Smart Resume Builder for modern job seekers. Build, edit, and print with ease.</p>
      </div>
      <div>
        <h4>Quick Links</h4>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="templates.html">Templates</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
      <div>
        <h4>Contact</h4>
        <p>Email: support@careercraft.com</p>
        <p>Phone: +91 98765 43210</p>
      </div>
    </div>
    <p class="copy">© 2025 CareerCraft. All Rights Reserved.</p>
  </footer>

</body>
</html>
